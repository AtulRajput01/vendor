import{r as c,_ as R,R as v,b,c as I,P as O,j as e}from"./index-BVLntUA-.js";import{a as S}from"./index-DTDyDBer.js";import{F as N}from"./index.es-6gMk8n5g.js";import{f as W,g as _,a as U}from"./index-DB5IPdYf.js";import{C as G,a as $}from"./CCardBody-BhP0jfyF.js";import{C as Y}from"./CCardHeader-DfkL9Tx7.js";import{a as q,b as J,c as K,d as u}from"./DefaultLayout-B_GgKFtV.js";import{C as Q,a as X,b as D,c as C,d as Z,e as j}from"./CTable-DG3ti4L7.js";import{b as ee,a as y}from"./CContainer-LIBSLkwT.js";import{C as re,a as se}from"./CModalBody-DRuZb03z.js";import{C as ae}from"./CModalHeader-ByVj3V7d.js";import{C as te}from"./CModalTitle-HlWOm-gh.js";import{C as ie}from"./CForm-CggMzn3e.js";import{C as le,a as l}from"./CRow-Cqaj2-K0.js";import{a as n,C as h}from"./CFormInput-CCvN3GNj.js";import{C as ne}from"./CFormSelect-Cs3-kqER.js";import{C as ce}from"./CModalFooter-C15hZfs4.js";import"./index.esm-OMrcyoBq.js";import"./BillingInfo-b7LCQT_k.js";import"./cil-lock-locked-DmxpJbVL.js";import"./tlogo1-w0QlOMSf.js";var T=c.forwardRef(function(a,m){var d,x=a.children,s=a.align,t=a.className,i=a.size,k=R(a,["children","align","className","size"]);return v.createElement("nav",b({ref:m},k),v.createElement("ul",{className:I("pagination",(d={},d["justify-content-".concat(s)]=s,d["pagination-".concat(i)]=i,d),t)},x))});T.propTypes={align:O.oneOf(["start","center","end"]),children:O.node,className:O.string,size:O.oneOf(["sm","lg"])};T.displayName="CPagination";var f=c.forwardRef(function(a,m){var d=a.children,x=a.as,s=a.className,t=R(a,["children","as","className"]),i=x??(t.active?"span":"a");return v.createElement("li",b({className:I("page-item",{active:t.active,disabled:t.disabled},s)},t.active&&{"aria-current":"page"}),i==="a"?v.createElement(ee,b({className:"page-link",as:i},t,{ref:m}),d):v.createElement(i,{className:"page-link",ref:m},d))});f.propTypes={as:O.elementType,children:O.node,className:O.string};f.displayName="CPaginationItem";const Ie=()=>{const[a,m]=c.useState([]),[d,x]=c.useState(!0),[s,t]=c.useState(null),[i,k]=c.useState(""),[P,g]=c.useState(!1),[de,w]=c.useState(!1),[E,F]=c.useState("ALL");c.useEffect(()=>{A()},[]);const A=async()=>{try{const r=await S.get("http://www.taxidermyvendor.hunt30.com/api/OrderDetails/status/ACCEPT");m(r.data),x(!1)}catch(r){console.error("Error fetching order details:",r),x(!1)}},L=r=>{t(r),k(r.trackStatus),g(!0)},B=r=>{t(r),w(!0)},M=r=>{k(r.target.value)},V=async()=>{try{await S.put(`http://www.taxidermyvendor.hunt30.com/api/OrderStatusTrack/${s._id}`,{trackStatus:i}),t({...s,trackStatus:i}),m(r=>r.map(o=>o._id===s._id?{...o,trackStatus:i}:o)),g(!1)}catch(r){console.error("Error updating track status:",r)}},H=async r=>{try{await S.delete(`http://www.taxidermyvendor.hunt30.com/api/OrderDetails/${r}`),m(a.filter(o=>o._id!==r))}catch(o){console.error("Error deleting order:",o)}},p=r=>{F(r)},z=E==="ALL"?a:a.filter(r=>r.trackStatus===E);return e.jsxs(G,{children:[e.jsxs(Y,{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("h4",{children:"Order Status Tracking"}),e.jsxs(q,{className:"float-right",children:[e.jsx(J,{color:"secondary",children:"Filter Orders"}),e.jsxs(K,{children:[e.jsx(u,{onClick:()=>p("ALL"),children:"All"}),e.jsx(u,{onClick:()=>p("ORDER CONFIRMED"),children:"Order Confirmed"}),e.jsx(u,{onClick:()=>p("PENDING"),children:"Pending"}),e.jsx(u,{onClick:()=>p("ORDER BEING PROCESSED"),children:"Order Being Processed"}),e.jsx(u,{onClick:()=>p("ORDER DISPATCHED"),children:"Order Dispatched"}),e.jsx(u,{onClick:()=>p("ORDER ON ITS WAY"),children:"Order On Its Way"}),e.jsx(u,{onClick:()=>p("ORDER RECEIVED"),children:"Order Received"})]})]})]}),e.jsxs($,{children:[e.jsxs(Q,{hover:!0,bordered:!0,striped:!0,responsive:!0,children:[e.jsx(X,{color:"dark",children:e.jsxs(D,{children:[e.jsx(C,{children:"Order ID"}),e.jsx(C,{children:"Items"}),e.jsx(C,{children:"Date and Time"}),e.jsx(C,{children:"Price"}),e.jsx(C,{children:"Special Note"}),e.jsx(C,{children:"Track Status"}),e.jsx(C,{children:"Actions"})]})}),e.jsx(Z,{children:d?e.jsx(D,{children:e.jsx(j,{colSpan:"7",children:"Loading..."})}):z.map((r,o)=>e.jsxs(D,{children:[e.jsx(j,{children:r.orderId}),e.jsx(j,{children:r.items}),e.jsx(j,{children:r.dateTime}),e.jsx(j,{children:r.price}),e.jsx(j,{children:r.specialNote}),e.jsx(j,{children:r.trackStatus}),e.jsxs(j,{children:[e.jsx(y,{onClick:()=>L(r),children:e.jsx(N,{icon:W,style:{color:"#975c26"}})}),e.jsx(y,{onClick:()=>B(r),children:e.jsx(N,{icon:_,style:{color:"#1d979f"}})}),e.jsx(y,{onClick:()=>H(r._id),children:e.jsx(N,{icon:U,style:{color:"#b71f1f"}})})]})]},o))})]}),e.jsxs(T,{align:"center","aria-label":"Page navigation example",children:[e.jsx(f,{disabled:!0,"aria-label":"Previous",children:e.jsx("span",{"aria-hidden":"true",children:"«"})}),e.jsx(f,{active:!0,children:"1"}),e.jsx(f,{children:"2"}),e.jsx(f,{children:"3"}),e.jsx(f,{"aria-label":"Next",children:e.jsx("span",{"aria-hidden":"true",children:"»"})})]})]}),s&&e.jsxs(re,{visible:P,onClose:()=>g(!1),children:[e.jsx(ae,{onClose:()=>g(!1),children:e.jsx(te,{children:"View Order"})}),e.jsx(se,{children:e.jsx(ie,{children:e.jsxs(le,{children:[e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Order ID"}),e.jsx(h,{value:s.orderId,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Items"}),e.jsx(h,{value:s.items,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Date and Time"}),e.jsx(h,{value:s.dateTime,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Price"}),e.jsx(h,{value:s.price,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Special Note"}),e.jsx(h,{value:s.specialNote,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Track Status"}),e.jsxs(ne,{value:i,onChange:M,children:[e.jsx("option",{value:"Order Confirmed",children:"Order Confirmed"}),e.jsx("option",{value:"Order Being Processed",children:"Order Being Processed"}),e.jsx("option",{value:"Order Dispatched",children:"Order Dispatched"}),e.jsx("option",{value:"Order On Its Way",children:"Order On Its Way"}),e.jsx("option",{value:"Order Received",children:"Order Received"})]})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"User Name"}),e.jsx(h,{value:s.userName,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Mobile Number"}),e.jsx(h,{value:s.mobileNumber,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Email"}),e.jsx(h,{value:s.email,readOnly:!0})]}),e.jsxs(l,{md:6,children:[e.jsx(n,{children:"Address"}),e.jsx(h,{value:s.address,readOnly:!0})]})]})})}),e.jsxs(ce,{children:[e.jsx(y,{color:"primary",onClick:V,children:"Update Status"}),e.jsx(y,{color:"secondary",onClick:()=>g(!1),children:"Cancel"})]})]})]})};export{Ie as default};
